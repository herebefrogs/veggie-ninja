<html><head><style>body {
    margin: 0;
    text-align: center;
  }</style></head><body><canvas></canvas><script>"use strict";var _slicedToArray=function(){function e(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,h=e[Symbol.iterator]();!(a=(r=h.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&h.return&&h.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function t(){N.drawImage(_,0,0,_.width,_.height,0,0,X.width,X.height)}function n(e){e.target.hidden&&ie&&h({gamepad:{index:ie.index,connected:!1}}),R(!event.target.hidden)}function a(e){var t=c(e);e.x<=0?e.x=0:e.x+t.w>=C&&(e.x=C-t.w),e.y<=0?e.y=0:e.y>=z-t.h&&(e.y=z-t.h)}function i(){var e=d("ninja","idle","right");return{action:"idle",attackTime:U,dead:!1,direction:"right",frame:0,lastFrame:0,lastDead:0,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,speed:100,type:"ninja",x:(C-e.w)/2,y:(z-e.h)/2}}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eggplant",n=d(t,"move","left",0),a=0,i=0;switch(e(0,3)){case 0:a=e(0,C-n.w);break;case 1:a=C-n.w,i=e(0,z-n.h);break;case 2:a=e(0,C-n.w),i=z-n.h;break;case 3:i=e(0,z-n.h)}return{action:"move",dead:!1,direction:"left",frame:0,lastFrame:0,lastDead:0,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,speed:60,type:t,x:a,y:i}}function r(e,t){(t||navigator.getGamepads())[e.gamepad.index]&&e.gamepad.connected?(console.log("connecting",e.gamepad),ie=e.gamepad):h({gamepad:{index:e.gamepad.index,connected:!1}})}function h(e){ie&&ie.index===e.gamepad.index&&!e.gamepad.connected&&(console.log("disconnecting",ie),ie=void 0)}function c(e){var t=J[e.type][e.action][e.direction];return"idle"!==e.action?t[e.frame]:t}function d(e,t,n,a){return c({action:t,direction:n,frame:a,type:e})}function v(){addEventListener("resize",L),_.width=C,_.height=z,L(),navigator.getGamepads||(f=function(){}),u(ve).then(function(e){ve=e}).then(function(){return u(ee)}).then(function(e){ee=e}).then(m)}function y(e){32===e.which&&(oe.attack=!0),37!==e.which&&65!==e.which&&81!==e.which||(oe.moveLeft=-1),38!==e.which&&90!==e.which&&87!==e.which||(oe.moveUp=-1),39!==e.which&&68!==e.which||(oe.moveRight=1),40!==e.which&&83!==e.which||(oe.moveDown=1),80===e.which&&R(!de)}function w(e){32===e.which&&(oe.attack=!1),37!==e.which&&65!==e.which&&81!==e.which||(oe.moveLeft=0),38!==e.which&&90!==e.which&&87!==e.which||(oe.moveUp=0),39!==e.which&&68!==e.which||(oe.moveRight=0),40!==e.which&&83!==e.which||(oe.moveDown=0)}function m(){addEventListener("keydown",y),addEventListener("keyup",w),addEventListener("gamepadconnected",r),addEventListener("gamepaddisconnected",h),document.addEventListener("visibilitychange",n),oe=i(),ne=[oe],ae=[],ye=void 0,he=I,we=0,W(),R(!0)}function u(e){return new Promise(function(t){var n=new Image;n.addEventListener("load",function(){t(n)}),n.src=e})}function l(){de&&(ce=requestAnimationFrame(l),A(),te=Date.now(),M((te-re)/1e3),re=te)}function f(){var e=navigator.getGamepads();if(!ie){var t=!0,n=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var h=i.value;if(h&&h.connected){r({gamepad:h},e);break}}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}if(ie){oe.attack=ie.buttons[T].pressed||ie.buttons[Z].pressed||ie.buttons[G].pressed||ie.buttons[S].pressed;var c=Math.round(100*ie.axes[j])/100;c<=0?(oe.moveLeft=c,oe.moveRight=0):(oe.moveLeft=0,oe.moveRight=c);var d=Math.round(100*ie.axes[H])/100;d<=0?(oe.moveUp=d,oe.moveDown=0):(oe.moveUp=0,oe.moveDown=d)}}function A(){$.fillStyle="#FFFFFF",$.fillRect(0,0,_.width,_.height);var e=!0,n=!1,a=void 0;try{for(var i,o=ae[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){g(i.value)}}catch(e){n=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}var r=!0,h=!1,c=void 0;try{for(var d,v=ne[Symbol.iterator]();!(r=(d=v.next()).done);r=!0){g(d.value)}}catch(e){h=!0,c=e}finally{try{!r&&v.return&&v.return()}finally{if(h)throw c}}x(he),s(oe.attackTime),p("score:"+we,K,K),t()}function s(e){e=""+Math.ceil(10*e);var t="attack:"+e/10+("0"===e[e.length-1]?".0":"")+"s";p(t,Math.round((C-t.length*(K+1))/2),K)}function g(e){var t=c(e);$.drawImage(ve,t.x,t.y,t.w,t.h,Math.round(e.x),Math.round(e.y),t.w,t.h)}function x(e){var t="0:"+(e<=9?"0":"")+Math.ceil(e);p(t,C-t.length*(K+1)-K,K)}function p(e,t,n){for(var a=0;a<e.length;a++)$.drawImage(ee,O.indexOf(e[a])*K,0,K,K,t+a*(K+1),n,K,K)}function L(){var e=Math.min(innerWidth/C,innerHeight/z);X.width=C*e,X.height=z*e,$.mozImageSmoothingEnabled=N.mozImageSmoothingEnabled=!1,$.msImageSmoothingEnabled=N.msImageSmoothingEnabled=!1,$.imageSmoothingEnabled=N.imageSmoothingEnabled=!1}function b(e){var t=e.moveLeft+e.moveRight,n=e.moveUp+e.moveDown;e.action=0===n&&0===t?"idle":e.attack&&e.attackTime?"attack":"move",e.direction=n<0?"up":n>0?"down":e.direction,e.direction=t<0?"left":t>0?"right":e.direction}function P(e,t){e.attackTime=Math.max(0,Math.min(U,e.attackTime+(e.attack?-t:t*B)))}function k(e,t){"idle"!==e.action&&(e.lastFrame+=t,e.lastFrame>V&&(e.lastFrame-=V,e.frame=(e.frame+1)%J[e.type][e.action][e.direction].length))}function D(e,t){if(!e.dead){var n=e.speed*t*("attack"===e.action?E:1);e.x+=n*(e.moveLeft+e.moveRight),e.y+=n*(e.moveUp+e.moveDown)}}function Y(e,t){e.moveLeft=e.moveRight=e.moveUp=e.moveDown=0;var n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a);if(0!==i){var o=n/i,r=a/i;e[o>=0?"moveRight":"moveLeft"]=o,e[r>=0?"moveDown":"moveUp"]=r}}function W(){var t=["eggplant","garlic","radish"][e(0,2)];ne.push(o(t))}function R(e){de=e,de?(re=Date.now(),l()):cancelAnimationFrame(ce)}function Q(){removeEventListener("keydown",y),removeEventListener("keyup",w),removeEventListener("gamepadconnected",r),removeEventListener("gamepaddisconnected",h),document.removeEventListener("visibilitychange",n),R(!1)}function M(e){if(!oe.dead&&he>0){f();var t=c(oe),n=!0,i=!1,o=void 0;try{for(var r,h=ne[Symbol.iterator]();!(n=(r=h.next()).done);n=!0){var d=r.value;if(d!==oe&&!d.dead){var v=c(d);oe.x<d.x+v.w&&oe.x+t.w>d.x&&oe.y<d.y+v.h&&oe.y+t.h>d.y&&("attack"===oe.action?(d.action="dead",d.dead=!0,d.frame=0):(oe.action="dead",oe.dead=!0,oe.frame=0))}}}catch(e){i=!0,o=e}finally{try{!n&&h.return&&h.return()}finally{if(i)throw o}}var y=!0,w=!1,u=void 0;try{for(var l,A=ne.entries()[Symbol.iterator]();!(y=(l=A.next()).done);y=!0){var s=_slicedToArray(l.value,2),g=s[0],x=s[1];x.dead?F(x,g):(x===oe?(P(x,e),b(x)):0===x.frame&&Y(x,oe),k(x,e),D(x,e),a(x))}}catch(e){w=!0,u=e}finally{try{!y&&A.return&&A.return()}finally{if(w)throw u}}ne.length<2&&!oe.dead&&W(),he-=e}else{ye||(ye=setTimeout(function(){Q(),m()},q));var p=!0,L=!1,R=void 0;try{for(var M,E=ne[Symbol.iterator]();!(p=(M=E.next()).done);p=!0){var U=M.value;U!==oe&&(0===U.frame&&Y(U,oe),oe.dead&&D(U,e)),k(U,e)}}catch(e){L=!0,R=e}finally{try{!p&&E.return&&E.return()}finally{if(L)throw R}}}}function F(e,t){ne.splice(t,1),ae.push(e),e!==oe&&(we+=1)}document.title="Veggie Ninja";var E=3,U=5,B=.3,V=.1,q=2e3,I=60,j=0,H=1,T=0,Z=1,G=2,S=3,z=300,C=400,K=8,J={eggplant:{dead:{left:[{x:64,y:144,w:16,h:18}]},move:{left:[{x:0,y:72,w:16,h:18},{x:16,y:72,w:16,h:18},{x:32,y:72,w:16,h:18},{x:48,y:72,w:16,h:18},{x:64,y:72,w:16,h:18}]}},garlic:{dead:{left:[{x:64,y:144,w:16,h:18}]},move:{left:[{x:0,y:108,w:16,h:18},{x:16,y:108,w:16,h:18},{x:32,y:108,w:16,h:18},{x:48,y:108,w:16,h:18},{x:64,y:108,w:16,h:18}]}},ninja:{attack:{left:[{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}],down:[{x:16,y:18,w:16,h:18},{x:32,y:18,w:16,h:18},{x:48,y:18,w:16,h:18},{x:64,y:18,w:16,h:18}],right:[{x:16,y:36,w:16,h:18},{x:32,y:36,w:16,h:18},{x:48,y:36,w:16,h:18},{x:64,y:36,w:16,h:18}],up:[{x:16,y:54,w:16,h:18},{x:32,y:54,w:16,h:18},{x:48,y:54,w:16,h:18},{x:64,y:54,w:16,h:18}]},dead:{left:[{x:64,y:144,w:16,h:18}],down:[{x:64,y:144,w:16,h:18}],right:[{x:64,y:144,w:16,h:18}],up:[{x:64,y:144,w:16,h:18}]},idle:{left:{x:0,y:0,w:16,h:18},down:{x:0,y:18,w:16,h:18},right:{x:0,y:36,w:16,h:18},up:{x:0,y:54,w:16,h:18}},move:{left:[{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}],down:[{x:16,y:18,w:16,h:18},{x:32,y:18,w:16,h:18},{x:48,y:18,w:16,h:18},{x:64,y:18,w:16,h:18}],right:[{x:16,y:36,w:16,h:18},{x:32,y:36,w:16,h:18},{x:48,y:36,w:16,h:18},{x:64,y:36,w:16,h:18}],up:[{x:16,y:54,w:16,h:18},{x:32,y:54,w:16,h:18},{x:48,y:54,w:16,h:18},{x:64,y:54,w:16,h:18}]}},radish:{dead:{left:[{x:64,y:144,w:16,h:18}]},move:{left:[{x:0,y:90,w:16,h:18},{x:16,y:90,w:16,h:18},{x:32,y:90,w:16,h:18},{x:48,y:90,w:16,h:18},{x:64,y:90,w:16,h:18}]}}},O="abcdefghijklmnopqrstuvwxyz0123456789.:!-%",X=document.querySelector("canvas"),N=X.getContext("2d"),_=document.createElement("canvas"),$=_.getContext("2d"),ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUgAAAAICAYAAACbO2brAAAB5klEQVR42uVa2YrDMAw07Fvf9v8/tqWwhTZY18zI9tJAWlLHiqJjPHI1fm8/d/Qcf4c3js6t6JAdUz0T1eeqR1WX2RxLTsY3nh7s/BPP7DspZGbsw+iS0bUSi6gt0Pcf4oOR7+bX88M6Xjd1jL87cNXzo2vF8yP5M4DMzp9dWzaM7HsNCPX8Dv/svq7YSGXfyng2NqJ7Mr5Vvb8SIBHZr3mWPUc1gLsB5P33bwRIhf3+6/gOgNs1v0IQojzxYgPJrysDVfqPAUmPHXoAmWHY5kLR4WDPAYoEt+RbhsisgDM5MwMrAJQByJMZWHeCIfMzMVqNj4h9VfMnC4CI/hkZWYC24r9iX5bpWfMigIwYrJmnqxlEJ4NEACwCSFS+l0AewF+/T2VAEYBUFjJFfFl2VJSAlg8rDBBlcSiAov7PgoiVH0j8ZBgiM474F2IwihK1k0Eie3irtxgY+yifn9njUpSI0QrP7nGx9mf1W72FU8kDRfwp7OPlsYIhsiW2t+iPXQ5mAvyEAGZLLBQgmT9pvH/Su/bY0BKoAyAt+50M4Ih9WYas8F9Fv26ArJbuHxUI0+aws82nugnLtHFU2xtWtqlU2zSybRJM6wjS5sG0kTD+725z6Y6FqI1I1YbTPd5ZYmfbg2ZyHuewlwnHUW0vAAAAAElFTkSuQmCC",te=void 0,ne=void 0,ae=void 0,ie=void 0,oe=void 0,re=void 0,he=void 0,ce=void 0,de=void 0,ve="data:image/png;base64,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",ye=void 0,we=void 0;addEventListener("load",v)}();
//# sourceMappingURL=game.js.map</script></body></html>